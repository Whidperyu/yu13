<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Ajax</title>
</head>
<body>
<script>
    // // 1 实例化 XHR
    // let xhr = new XMLHttpRequest()

    // // 2 监听状态  
    // // onreadystatechange：当状态值发生变化时的处理函数
    // xhr.onreadystatechange = function(){
    //     // readyState：请求的状态值(0,1,2,3,4)，status：HTTP状态码
    //     if(xhr.readyState == 4 && xhr.status == 200){
    //         // responseText：服务器响应的数据
    //         // console.log(xhr.responseText)  
    //         // 接收服务器响应的数据
    //         let json_str = xhr.responseText
    //         // 将JSON字符串转为 JS对象
    //         let obj = JSON.parse(json_str)
    //         console.log(obj);
    //         console.log(obj.name);
    //         console.log(obj.age);
    //     }
    // }

    // // 3 打开链接
    // xhr.open("get","http://localhost/04-07/Ajax.php")

    // // 4 发送请求
    // xhr.send()

    window.onload = function(){
        // 封装Ajax方法
        Ajax("get","http://localhost/04-07/Ajax.php")
        function Ajax(get,location){
            // 1 实例化 xhr
            let xhr = new XMLHttpRequest()

            // 2 监听状态
            xhr.onreadystatechange = function(){
                if(xhr.readyState == 4 && xhr.status == 200){
                    console.log(xhr.responseText);
                    let json_str = xhr.responseText
                    // 将 json字符串转为 js对象
                    let obj = JSON.parse(json_str)
                    console.log(obj);
                    console.log(obj.name);
                    console.log(obj.age);
                }
            }

            // 3 打开链接
            xhr.open(get,location)

            // 4 发送请求
            xhr.send()
        }
    }
</script>
</body>
</html>